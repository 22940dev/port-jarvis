[build.environment]
  NODE_VERSION = "12.13.1"
  NPM_VERSION = "6.13.1"
  YARN_VERSION = "1.21.0"
  YARN_FLAGS = "--no-ignore-optional --frozen-lockfile"

[build]
  command = "yarn build"
  publish = "public"

[context.deploy-preview]
  command = "yarn build:preview"


# The most important headers and redirects are specified in the _headers and
# _redirects files generated by Hugo. These are additional custom rules.

# Redirect default Netlify subdomain to primary domain:
[[redirects]]
  from = "https://jakejarvis.netlify.com/*"
  to = "https://jarv.is/:splat"
  status = 301
  force = true

# Support ancient RSS subscriptions from WordPress era:
[[redirects]]
  from = "/feed"
  to = "/feed.xml"
  status = 301
[[redirects]]
  from = "/rss"
  to = "/feed.xml"
  status = 301
[[redirects]]
  from = "/index.xml"
  to = "/feed.xml"
  status = 301

# Mirror Y2K site from GitHub Pages:
[[redirects]]
  from = "/y2k/*"
  to = "https://jakejarvis.github.io/y2k/:splat"
  status = 200

# Legacy GitHub Pages subdirectory behavior:
[[redirects]]
  from = "/ios-trackers/*"
  to = "https://jakejarvis.github.io/ios-trackers/:splat"
  status = 200
[[redirects]]
  from = "/scrabble/*"
  to = "https://jakejarvis.github.io/scrabble/:splat"
  status = 200
[[redirects]]
  from = "/comp20/*"
  to = "https://jakejarvis.github.io/comp20/:splat"
  status = 200
[[redirects]]
  from = "/candies/*"
  to = "https://jakejarvis.github.io/candies/:splat"
  status = 200
[[redirects]]
  from = "/awesome/*"
  to = "https://jakejarvis.github.io/synonyms-for-awesome/:splat"
  status = 200

# H A C K E R M A N ( ͡° ͜ʖ ͡°)
[[redirects]]
  from = "*/wp-login.php"
  to = "/h4x0rz.gif"
  status = 200
[[redirects]]
  from = "*/wp-admin/*"
  to = "/h4x0rz.gif"
  status = 200
[[redirects]]
  from = "/login"
  to = "/h4x0rz.gif"
  status = 200
[[redirects]]
  from = "/login.php"
  to = "/h4x0rz.gif"
  status = 200
