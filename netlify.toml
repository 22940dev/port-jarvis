[build]
  command = "npm run build"
  publish = "public"

[context.production.environment]
  HUGO_VERSION = "0.59.1"
  HUGO_ENV = "production"

[context.deploy-preview]
  command = "npm run build:preview"
  publish = "public"

[context.deploy-preview.environment]
  HUGO_VERSION = "0.59.1"
  HUGO_ENV = "development"


# The most important headers and redirects are specified in the _headers and
# _redirects files generated by Hugo. These are additional custom rules.

# Redirect default Netlify subdomain to primary domain:
[[redirects]]
  from = "https://jakejarvis.netlify.com/*"
  to = "https://jarv.is/:splat"
  status = 301
  force = true

# Support ancient RSS subscriptions from WordPress era:
[[redirects]]
  from = "/feed"
  to = "/index.xml"
  status = 301
[[redirects]]
  from = "/rss"
  to = "/index.xml"
  status = 301

# Mirror Y2K site from GitHub Pages:
[[redirects]]
  from = "/y2k/*"
  to = "https://jakejarvis.github.io/y2k/:splat"
  status = 200

# Mirror iOS tracker files from GitHub Pages:
[[redirects]]
  from = "/ios-trackers/*"
  to = "https://jakejarvis.github.io/ios-trackers/:splat"
  status = 200

# Mirror Princeton curriculum site from GitHub Pages:
[[redirects]]
  from = "/scrabble/*"
  to = "https://jakejarvis.github.io/scrabble/:splat"
  status = 200

# H A C K E R M A N ( ͡° ͜ʖ ͡°)
[[redirects]]
  from = "*/wp-login.php"
  to = "/h4x0rz.gif"
  status = 200
[[redirects]]
  from = "*/wp-admin/*"
  to = "/h4x0rz.gif"
  status = 200
[[redirects]]
  from = "*/login"
  to = "/h4x0rz.gif"
  status = 200
